openapi: 3.0.3
info:
  title: Ozzu MVP API
  version: 1.0.0
  description: >
    Ozzu MVP OpenAPI 3.0 spec including MVP flows (Registration/Login/Spotlight/Event Page),
    LCM endpoints (Domain/Event/Series/Teams/Players/Wager Cards), Wager creation,
    Scoped Referents, Lounges + Event Lounges + Lounge Entries + Lounge Membership moderation,
    and flexible internalProperties on all domain objects.

servers:
  - url: http://localhost:8080
    description: Local
  - url: https://api.ozzu.ai
    description: Production

tags:
  - name: Users
  - name: Sessions
  - name: Spotlight
  - name: Domains
  - name: Events
  - name: Series
  - name: Teams
  - name: Players
  - name: Concepts
  - name: ScopedReferents
  - name: Wagers
  - name: WagerCardsLCM
  - name: Lounges
  - name: EventLounges
  - name: LoungeEntries
  - name: LoungeMemberships
  - name: Notifications
  - name: Artifacts
  - name: Tokens

security:
  - BearerAuth: []

paths:
  /ozzu/users/actions/googleLogin:
    post:
      tags: [ Users, Sessions ]
      summary: Google login (register-if-needed) -> returns Ozzu JWT
      security: [ ]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/GoogleLoginRequest"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AuthResponse"
  /ozzu/users:
    post:
      tags: [Users]
      summary: Registration (supports social logins + referral)
      description: >
        Creates a user. Server credits initial airdrop (500 tokens) and
        referral bonus to referrer (200 tokens) if referralCode is provided.
        Server may auto-join default lounges (Ozzu Lounge).
      security: []  # registration is public
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UserRegistrationRequest"
      responses:
        "201":
          description: Created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/User"

  /ozzu/users/{userId}/actions/login:
    post:
      tags: [Sessions]
      summary: Login (creates/refreshes sessionId)
      description: >
        Returns a sessionId. Session expires after X hours unless keepLoggedIn extends it.
      security: []  # login is public
      parameters:
        - $ref: "#/components/parameters/UserId"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/LoginRequest"
      responses:
        "200":
          description: Login successful
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/LoginResponse"

  /ozzu/domains/{domainId}/actions/getSpotlight:
    post:
      tags: [Spotlight]
      summary: Spotlight feed
      description: >
        Returns spotlight content items including shorts, selected celebrity wagers,
        and spotlight games with Info/Scorecard. Supports P2E (e.g., 25 shorts watched -> 50 tokens).
      parameters:
        - $ref: "#/components/parameters/DomainId"
      requestBody:
        required: false
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SpotlightRequest"
      responses:
        "200":
          description: Spotlight response
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SpotlightResponse"

  /ozzu/domains:
    post:
      tags: [Domains]
      summary: Create domain
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/DomainCreateRequest"
      responses:
        "201":
          description: Domain created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Domain"

  /ozzu/domains/{domainId}/events:
    post:
      tags: [Events]
      summary: Create event/match
      parameters:
        - $ref: "#/components/parameters/DomainId"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/EventCreateRequest"
      responses:
        "201":
          description: Event created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Event"

  /ozzu/domains/{domainId}/events/{eventId}:
    get:
      tags: [Events]
      summary: Event Page
      description: >
        Returns event info and can include scorecard/lineup tabs, user wager summary,
        celebrity wagers, shorts, and Info summary ("top N predictions in play") via internalProperties.
      parameters:
        - $ref: "#/components/parameters/DomainId"
        - $ref: "#/components/parameters/EventId"
      responses:
        "200":
          description: Event
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/EventPageResponse"

  /ozzu/domains/{domainId}/players:
    get:
      tags: [Players]
      summary: List players for a domain
      parameters:
        - $ref: "#/components/parameters/DomainId"
      responses:
        "200":
          description: Player list
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Player"

  /ozzu/domains/{domainId}/series:
    post:
      tags: [Series]
      summary: Create series (league/tournament)
      parameters:
        - $ref: "#/components/parameters/DomainId"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SeriesCreateRequest"
      responses:
        "201":
          description: Series created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Series"

  /ozzu/domains/{domainId}/series/{seriesId}/teams:
    post:
      tags: [Teams]
      summary: Create team in series
      parameters:
        - $ref: "#/components/parameters/DomainId"
        - $ref: "#/components/parameters/SeriesId"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/TeamCreateRequest"
      responses:
        "201":
          description: Team created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Team"

  /ozzu/domains/{domainId}/conceptTerms:
    post:
      tags: [Concepts]
      summary: Create concept term (admin/backoffice)
      parameters:
        - $ref: "#/components/parameters/DomainId"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ConceptTermCreateRequest"
      responses:
        "201":
          description: Concept term created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ConceptTerm"

  /ozzu/domains/{domainId}/relationships:
    post:
      tags: [Concepts]
      summary: Create relationship between concept terms (admin/backoffice)
      parameters:
        - $ref: "#/components/parameters/DomainId"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/RelationshipCreateRequest"
      responses:
        "201":
          description: Relationship created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Relationship"

  /ozzu/domains/{domainId}/events/{eventId}/odds:
    get:
      tags: [ Odds ]
      summary: Quote odds for an event + wager card type
      parameters:
        - $ref: "#/components/parameters/DomainId"
        - $ref: "#/components/parameters/EventId"
        - name: wagerCardTypeId
          in: query
          required: true
          schema:
            $ref: "#/components/schemas/UUID"
      responses:
        "200":
          description: Odds quote
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/OddsQuoteResponse"

  /ozzu/domains/{domainId}/events/{eventId}/scopedReferents:
    post:
      tags: [ScopedReferents]
      summary: Create scoped referents (backend only)
      parameters:
        - $ref: "#/components/parameters/DomainId"
        - $ref: "#/components/parameters/EventId"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ScopedReferentCreateRequest"
      responses:
        "201":
          description: Scoped referent created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ScopedReferent"
    get:
      tags: [ScopedReferents]
      summary: Get scoped referents for event
      parameters:
        - $ref: "#/components/parameters/DomainId"
        - $ref: "#/components/parameters/EventId"
      responses:
        "200":
          description: Scoped referents
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/ScopedReferent"

  /ozzu/domains/{domainId}/events/{eventId}/wagers:
    post:
      tags: [Wagers]
      summary: Create wager (up to 5 cards)
      description: >
        Server credits P2E for wager creation (e.g., +50 tokens) per MVP rules.
      parameters:
        - $ref: "#/components/parameters/DomainId"
        - $ref: "#/components/parameters/EventId"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/WagerCreateRequest"
      responses:
        "201":
          description: Wager created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Wager"

  /ozzu/domains/{domainId}/actions/getWagers:
    get:
      tags: [Wagers]
      summary: Get my wagers (active and past) for domain
      parameters:
        - $ref: "#/components/parameters/DomainId"
      responses:
        "200":
          description: Wager list
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Wager"

  /ozzu/domains/{domainId}/wagerCards:
    post:
      tags: [WagerCardsLCM]
      summary: Create wager card type (template)
      parameters:
        - $ref: "#/components/parameters/DomainId"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/WagerCardTypeCreateRequest"
      responses:
        "201":
          description: Wager card type created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/WagerCardType"

  /ozzu/domains/{domainId}/wagerCards/{wagerCardTypeId}/bindings:
    post:
      tags: [WagerCardsLCM]
      summary: Create wager card type binding (required pick slot)
      parameters:
        - $ref: "#/components/parameters/DomainId"
        - $ref: "#/components/parameters/WagerCardTypeId"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/WagerCardTypeBindingCreateRequest"
      responses:
        "201":
          description: Wager card type binding created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/WagerCardTypeBinding"

  /ozzu/domains/{domainId}/lounges:
    post:
      tags: [Lounges]
      summary: Create lounge (e.g., Nike, Adidas, Ozzu)
      description: >
        Server can credit P2E (e.g., +200 tokens) for creating lounges.
      parameters:
        - $ref: "#/components/parameters/DomainId"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/LoungeCreateRequest"
      responses:
        "201":
          description: Lounge created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Lounge"

  /ozzu/domains/{domainId}/lounges/actions/getMyLounges:
    get:
      tags: [Lounges]
      summary: List lounges created by current user in domain
      parameters:
        - $ref: "#/components/parameters/DomainId"
      responses:
        "200":
          description: Lounges list
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Lounge"

  /ozzu/domains/{domainId}/events/{eventId}/eventLounges:
    post:
      tags: [EventLounges]
      summary: Create event lounge (lounge hosting an event)
      parameters:
        - $ref: "#/components/parameters/DomainId"
        - $ref: "#/components/parameters/EventId"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/EventLoungeCreateRequest"
      responses:
        "201":
          description: Event lounge created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/EventLounge"

  /ozzu/domains/{domainId}/events/{eventId}/eventLounges/{eventLoungeId}/loungeEntries:
    post:
      tags: [LoungeEntries]
      summary: Register / enter an event lounge
      description: >
        Server may debit entry fee (e.g., 100 tokens) depending on event lounge configuration.
      parameters:
        - $ref: "#/components/parameters/DomainId"
        - $ref: "#/components/parameters/EventId"
        - $ref: "#/components/parameters/EventLoungeId"
      requestBody:
        required: false
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/LoungeEntryCreateRequest"
      responses:
        "201":
          description: Entry created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/LoungeEntry"

  /ozzu/lounges/{loungeId}/members:
    post:
      tags: [LoungeMemberships]
      summary: Invite / admit user to lounge
      parameters:
        - $ref: "#/components/parameters/LoungeId"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/LoungeMemberCreateRequest"
      responses:
        "201":
          description: Membership created/updated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/LoungeMembership"
    get:
      tags: [LoungeMemberships]
      summary: List lounge members
      parameters:
        - $ref: "#/components/parameters/LoungeId"
        - name: status
          in: query
          required: false
          schema:
            $ref: "#/components/schemas/LoungeMemberStatus"
        - name: role
          in: query
          required: false
          schema:
            $ref: "#/components/schemas/LoungeMemberRole"
      responses:
        "200":
          description: Members list
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/LoungeMembershipListResponse"

  /ozzu/lounges/{loungeId}/members/{memberUserId}:
    patch:
      tags: [LoungeMemberships]
      summary: Update member (activate/inactivate/remove/ban, role changes)
      parameters:
        - $ref: "#/components/parameters/LoungeId"
        - name: memberUserId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/LoungeMemberUpdateRequest"
      responses:
        "200":
          description: Updated membership
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/LoungeMembership"

  /ozzu/lounges/{loungeId}/actions/notify:
    post:
      tags: [Notifications]
      summary: Notify lounge members
      parameters:
        - $ref: "#/components/parameters/LoungeId"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/LoungeNotifyRequest"
      responses:
        "201":
          description: Notification created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/LoungeNotification"

  /ozzu/domains/{domainId}/artifacts:
    get:
      tags: [Artifacts]
      summary: List artifacts (shorts/content) for domain/event/lounge
      parameters:
        - $ref: "#/components/parameters/DomainId"
        - name: eventId
          in: query
          required: false
          schema:
            type: string
            format: uuid
        - name: loungeId
          in: query
          required: false
          schema:
            type: string
            format: uuid
        - name: eventLoungeId
          in: query
          required: false
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: Artifacts
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Artifact"

  /ozzu/domains/{domainId}/artifacts/{artifactId}/actions/view:
    post:
      tags: [Artifacts]
      summary: Record artifact view (supports P2E)
      description: >
        Records a view. Server may credit tokens based on active reward campaigns
        (e.g., 25 shorts -> 50 tokens; lounge 5 artifacts -> 50 tokens).
      parameters:
        - $ref: "#/components/parameters/DomainId"
        - $ref: "#/components/parameters/ArtifactId"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ArtifactViewRequest"
      responses:
        "200":
          description: View recorded
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ArtifactViewResponse"

  /ozzu/users/{userId}/tokens/balance:
    get:
      tags: [Tokens]
      summary: Get token balance
      parameters:
        - $ref: "#/components/parameters/UserId"
      responses:
        "200":
          description: Balance
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/TokenBalanceResponse"

components:
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT

  parameters:
    DomainId:
      name: domainId
      in: path
      required: true
      schema: { type: string, format: uuid }

    EventId:
      name: eventId
      in: path
      required: true
      schema: { type: string, format: uuid }

    SeriesId:
      name: seriesId
      in: path
      required: true
      schema: { type: string, format: uuid }

    UserId:
      name: userId
      in: path
      required: true
      schema: { type: string, format: uuid }

    LoungeId:
      name: loungeId
      in: path
      required: true
      schema: { type: string, format: uuid }

    EventLoungeId:
      name: eventLoungeId
      in: path
      required: true
      schema: { type: string, format: uuid }

    ArtifactId:
      name: artifactId
      in: path
      required: true
      schema: { type: string, format: uuid }

    WagerCardTypeId:
      name: wagerCardTypeId
      in: path
      required: true
      schema: { type: string, format: uuid }

  schemas:
    UUID:
      type: string
      format: uuid

    Timestamp:
      type: string
      format: date-time

    InternalProperties:
      type: object
      description: Arbitrary JSON properties for forward compatibility.
      additionalProperties: true

    ApiError:
      type: object
      properties:
        code: { type: string }
        message: { type: string }
        details:
          $ref: "#/components/schemas/InternalProperties"

    AuthProvider:
      type: string
      enum: [EMAIL, GOOGLE, APPLE, FACEBOOK]

    GoogleLoginRequest:
      type: object
      required: [ idToken ]
      properties:
        idToken:
          type: string
          description: Google ID token (JWT) from Web/Android
        referralCode:
          type: string
          description: Optional referral code (applied only on first-time user creation)
        internalProperties:
          $ref: "#/components/schemas/InternalProperties"

    AuthResponse:
      type: object
      required: [ accessToken, tokenType, expiresInSeconds ]
      properties:
        accessToken:
          type: string
          description: Ozzu JWT
        tokenType:
          type: string
          example: Bearer
        expiresInSeconds:
          type: integer
          example: 7200

    UserRegistrationRequest:
      type: object
      required: [displayName, provider, providerUserId]
      properties:
        displayName: { type: string }
        provider:
          $ref: "#/components/schemas/AuthProvider"
        providerUserId: { type: string }
        referralCode: { type: string }
        internalProperties:
          $ref: "#/components/schemas/InternalProperties"

    User:
      type: object
      properties:
        id: { $ref: "#/components/schemas/UUID" }
        displayName: { type: string }
        provider: { $ref: "#/components/schemas/AuthProvider" }
        providerUserId: { type: string }
        timeCreated: { $ref: "#/components/schemas/Timestamp" }
        timeUpdated: { $ref: "#/components/schemas/Timestamp" }
        internalProperties:
          $ref: "#/components/schemas/InternalProperties"

    LoginRequest:
      type: object
      properties:
        keepLoggedIn: { type: boolean, default: false }
        internalProperties:
          $ref: "#/components/schemas/InternalProperties"

    LoginResponse:
      type: object
      properties:
        userId: { $ref: "#/components/schemas/UUID" }
        sessionId: { type: string }
        expiresAt: { $ref: "#/components/schemas/Timestamp" }
        internalProperties:
          $ref: "#/components/schemas/InternalProperties"

    ContextualFacet:
      type: object
      properties:
        id: { type: string }
        name: { type: string }
        description: { type: string }
        timeCreated: { $ref: "#/components/schemas/Timestamp" }
        timeBegin: { $ref: "#/components/schemas/Timestamp" }
        timeEnd: { $ref: "#/components/schemas/Timestamp" }
        geoLocation: { type: string }
        searchTerms:
          type: array
          items: { type: string }
        relatedObjects:
          type: array
          items:
            $ref: "#/components/schemas/RelatedObject"
        internalProperties:
          $ref: "#/components/schemas/InternalProperties"

    RelatedObject:
      type: object
      properties:
        objectType: { type: string }
        objectId: { $ref: "#/components/schemas/UUID" }
        objectURI: { type: string }
        name: { type: string }
        description: { type: string }
        timeCreated: { $ref: "#/components/schemas/Timestamp" }
        internalProperties:
          $ref: "#/components/schemas/InternalProperties"

    SpotlightRequest:
      type: object
      properties:
        contextualFacet:
          $ref: "#/components/schemas/ContextualFacet"

    SpotlightItemType:
      type: string
      enum: [SHORTS, SPOTLIGHT_GAME, CELEBRITY_WAGERS, INFO_BLOCK]

    SpotlightItem:
      type: object
      properties:
        id: { type: string }
        responseType:
          $ref: "#/components/schemas/SpotlightItemType"
        name: { type: string }
        description: { type: string }
        timeBegin: { $ref: "#/components/schemas/Timestamp" }
        timeEnd: { $ref: "#/components/schemas/Timestamp" }
        contentSchemaURI: { type: string }
        content:
          $ref: "#/components/schemas/InternalProperties"
        pageCount: { type: integer }
        totalItems: { type: integer }
        nextPage: { type: integer }
        prevPage: { type: integer }
        requestId: { type: string }
        responseTime: { type: integer }
        internalProperties:
          $ref: "#/components/schemas/InternalProperties"

    SpotlightResponse:
      type: object
      properties:
        items:
          type: array
          items:
            $ref: "#/components/schemas/SpotlightItem"
        internalProperties:
          $ref: "#/components/schemas/InternalProperties"

    DomainCreateRequest:
      type: object
      required: [name]
      properties:
        name: { type: string }
        description: { type: string }
        internalProperties:
          $ref: "#/components/schemas/InternalProperties"

    Domain:
      type: object
      properties:
        id: { $ref: "#/components/schemas/UUID" }
        name: { type: string }
        description: { type: string }
        timeCreated: { $ref: "#/components/schemas/Timestamp" }
        timeUpdated: { $ref: "#/components/schemas/Timestamp" }
        internalProperties:
          $ref: "#/components/schemas/InternalProperties"

    SeriesCreateRequest:
      type: object
      required: [name]
      properties:
        name: { type: string }
        description: { type: string }
        internalProperties:
          $ref: "#/components/schemas/InternalProperties"

    Series:
      type: object
      properties:
        id: { $ref: "#/components/schemas/UUID" }
        domainId: { $ref: "#/components/schemas/UUID" }
        name: { type: string }
        description: { type: string }
        timeCreated: { $ref: "#/components/schemas/Timestamp" }
        timeUpdated: { $ref: "#/components/schemas/Timestamp" }
        internalProperties:
          $ref: "#/components/schemas/InternalProperties"

    EventCreateRequest:
      type: object
      required: [name]
      properties:
        name: { type: string }
        description: { type: string }
        seriesId: { $ref: "#/components/schemas/UUID" }
        timeEventStart: { $ref: "#/components/schemas/Timestamp" }
        timeEventEnd: { $ref: "#/components/schemas/Timestamp" }
        internalProperties:
          $ref: "#/components/schemas/InternalProperties"

    Event:
      type: object
      properties:
        id: { $ref: "#/components/schemas/UUID" }
        domainId: { $ref: "#/components/schemas/UUID" }
        seriesId: { $ref: "#/components/schemas/UUID" }
        name: { type: string }
        description: { type: string }
        timeCreated: { $ref: "#/components/schemas/Timestamp" }
        timeUpdated: { $ref: "#/components/schemas/Timestamp" }
        timeEventStart: { $ref: "#/components/schemas/Timestamp" }
        timeEventEnd: { $ref: "#/components/schemas/Timestamp" }
        isEventCanceled: { type: boolean }
        isEventCompleted: { type: boolean }
        objectType: { type: string }
        objectProfile: { type: string }
        objectStatus: { type: string }
        internalProperties:
          $ref: "#/components/schemas/InternalProperties"

    Scorecard:
      type: object
      description: Cricket scorecard schema placeholder (stored as JSON by server).
      additionalProperties: true

    LineupEntry:
      type: object
      properties:
        participantType: { type: string, enum: [PLAYER, TEAM] }
        participantId: { $ref: "#/components/schemas/UUID" }
        role: { type: string }
        internalProperties:
          $ref: "#/components/schemas/InternalProperties"

    EventPageResponse:
      allOf:
        - $ref: "#/components/schemas/Event"
        - type: object
          properties:
            scorecard:
              $ref: "#/components/schemas/Scorecard"
            lineup:
              type: array
              items:
                $ref: "#/components/schemas/LineupEntry"
            myWagerSummary:
              $ref: "#/components/schemas/InternalProperties"
            celebrityWagers:
              type: array
              items:
                $ref: "#/components/schemas/Wager"
            shorts:
              type: array
              items:
                $ref: "#/components/schemas/Artifact"
            info:
              $ref: "#/components/schemas/InternalProperties"

    Player:
      type: object
      properties:
        id: { $ref: "#/components/schemas/UUID" }
        domainId: { $ref: "#/components/schemas/UUID" }
        name: { type: string }
        objectType: { type: string }
        objectProfile: { type: string }
        objectStatus: { type: string }
        description: { type: string }
        timeCreated: { $ref: "#/components/schemas/Timestamp" }
        timeUpdated: { $ref: "#/components/schemas/Timestamp" }
        internalProperties:
          $ref: "#/components/schemas/InternalProperties"

    TeamCreateRequest:
      type: object
      required: [name]
      properties:
        name: { type: string }
        description: { type: string }
        internalProperties:
          $ref: "#/components/schemas/InternalProperties"

    Team:
      type: object
      properties:
        id: { $ref: "#/components/schemas/UUID" }
        domainId: { $ref: "#/components/schemas/UUID" }
        seriesId: { $ref: "#/components/schemas/UUID" }
        name: { type: string }
        description: { type: string }
        timeCreated: { $ref: "#/components/schemas/Timestamp" }
        timeUpdated: { $ref: "#/components/schemas/Timestamp" }
        internalProperties:
          $ref: "#/components/schemas/InternalProperties"

    ConceptTermCreateRequest:
      type: object
      required: [name]
      properties:
        name: { type: string }
        description: { type: string }
        parentConceptTermId: { $ref: "#/components/schemas/UUID" }
        objectType: { type: string }
        objectProfile: { type: string }
        objectStatus: { type: string }
        isInternal: { type: boolean }
        internalProperties:
          $ref: "#/components/schemas/InternalProperties"

    ConceptTerm:
      type: object
      properties:
        id: { $ref: "#/components/schemas/UUID" }
        domainId: { $ref: "#/components/schemas/UUID" }
        name: { type: string }
        description: { type: string }
        parentConceptTermId: { $ref: "#/components/schemas/UUID" }
        objectType: { type: string }
        objectProfile: { type: string }
        objectStatus: { type: string }
        isInternal: { type: boolean }
        timeCreated: { $ref: "#/components/schemas/Timestamp" }
        timeUpdated: { $ref: "#/components/schemas/Timestamp" }
        internalProperties:
          $ref: "#/components/schemas/InternalProperties"

    RelationshipType:
      type: string
      enum: [IS_A, PART_OF, RELATED_TO, DEPENDS_ON, CAUSES, CUSTOM]

    RelationshipCreateRequest:
      type: object
      required: [fromConceptTermId, toConceptTermId, relationshipType]
      properties:
        fromConceptTermId: { $ref: "#/components/schemas/UUID" }
        toConceptTermId: { $ref: "#/components/schemas/UUID" }
        relationshipType: { $ref: "#/components/schemas/RelationshipType" }
        strength: { type: number, format: float }
        internalProperties:
          $ref: "#/components/schemas/InternalProperties"

    Relationship:
      type: object
      properties:
        id: { $ref: "#/components/schemas/UUID" }
        domainId: { $ref: "#/components/schemas/UUID" }
        fromConceptTermId: { $ref: "#/components/schemas/UUID" }
        toConceptTermId: { $ref: "#/components/schemas/UUID" }
        relationshipType: { $ref: "#/components/schemas/RelationshipType" }
        strength: { type: number, format: float }
        timeCreated: { $ref: "#/components/schemas/Timestamp" }
        timeUpdated: { $ref: "#/components/schemas/Timestamp" }
        internalProperties:
          $ref: "#/components/schemas/InternalProperties"

    ScopedEntityType:
      type: string
      enum: [PLAYER, TEAM, TEXT]

    WagerCreateRequest:
      type: object
      required: [ name, wagerNarrativeDetails, stakeTokens ]
      properties:
        name: { type: string }
        stakeTokens:
          type: integer
          minimum: 0
          description: Stake amount in Ozzu tokens
        acceptOddsSlippageBps:
          type: integer
          minimum: 0
          maximum: 10000
          default: 50
          description: Allowed slippage in basis points (50 = 0.50%)
        wagerNarrativeDetails:
          type: array
          items:
            $ref: "#/components/schemas/WagerNarrativeDetail"
        internalProperties:
          $ref: "#/components/schemas/InternalProperties"

    OddsQuoteResponse:
      type: object
      required: [ domainId, eventId, wagerCardTypeId, bindings ]
      properties:
        domainId: { $ref: "#/components/schemas/UUID" }
        eventId: { $ref: "#/components/schemas/UUID" }
        wagerCardTypeId: { $ref: "#/components/schemas/UUID" }
        locked:
          type: boolean
          description: True when quoting is disabled due to event status
        bindings:
          type: array
          items:
            $ref: "#/components/schemas/OddsBindingQuote"
        internalProperties:
          $ref: "#/components/schemas/InternalProperties"

    OddsBindingQuote:
      type: object
      required: [ wagerCardTypeBindingId, conceptTermId, picks ]
      properties:
        wagerCardTypeBindingId: { $ref: "#/components/schemas/UUID" }
        conceptTermId: { $ref: "#/components/schemas/UUID" }
        picks:
          type: array
          items:
            $ref: "#/components/schemas/OddsPickQuote"

    OddsPickQuote:
      type: object
      required: [ scopedReferentId, name, decimalOdds ]
      properties:
        scopedReferentId: { $ref: "#/components/schemas/UUID" }
        name: { type: string }
        decimalOdds: { type: number, format: double }
        impliedProb:
          type: number
          format: double
        internalProperties:
          $ref: "#/components/schemas/InternalProperties"

    ScopedReferentCreateRequest:
      type: object
      required: [name, conceptTermId, entityType]
      properties:
        name: { type: string }
        groupAffiliation: { type: string }
        isGenerated: { type: boolean, default: false }
        conceptTermId: { $ref: "#/components/schemas/UUID" }
        entityType: { $ref: "#/components/schemas/ScopedEntityType" }
        entityId:
          type: string
          format: uuid
          description: playerId or teamId when entityType is PLAYER/TEAM
        entityLabel:
          type: string
          description: used when entityType is TEXT
        pointsValue: { type: integer, default: 0 }
        isOptional: { type: boolean, default: false }
        isEventConstrained: { type: boolean, default: true }
        internalProperties:
          $ref: "#/components/schemas/InternalProperties"

    ScopedReferent:
      type: object
      properties:
        id: { $ref: "#/components/schemas/UUID" }
        domainId: { $ref: "#/components/schemas/UUID" }
        eventId: { $ref: "#/components/schemas/UUID" }
        name: { type: string }
        groupAffiliation: { type: string }
        isGenerated: { type: boolean }
        conceptTermId: { $ref: "#/components/schemas/UUID" }
        entityType: { $ref: "#/components/schemas/ScopedEntityType" }
        playerId: { $ref: "#/components/schemas/UUID" }
        teamId: { $ref: "#/components/schemas/UUID" }
        entityLabel: { type: string }
        pointsValue: { type: integer }
        isOptional: { type: boolean }
        isEventConstrained: { type: boolean }
        timeCreated: { $ref: "#/components/schemas/Timestamp" }
        timeUpdated: { $ref: "#/components/schemas/Timestamp" }
        internalProperties:
          $ref: "#/components/schemas/InternalProperties"

    WagerStatus:
      type: string
      enum: [DRAFT, PLACED, WON, LOST, VOID, CANCELED]

    WagerNarrativeDetail:
      type: object
      properties:
        referentBindings:
          type: array
          items:
            $ref: "#/components/schemas/WagerReferentBindingRequest"
        internalProperties:
          $ref: "#/components/schemas/InternalProperties"

    WagerReferentBindingRequest:
      type: object
      required: [wagerCardTypeId, bindings]
      properties:
        wagerCardTypeId: { $ref: "#/components/schemas/UUID" }
        bindings:
          type: array
          description: List of picks for this card (each maps to a wager_card_binding row)
          items:
            $ref: "#/components/schemas/WagerCardBindingPickRequest"
        internalProperties:
          $ref: "#/components/schemas/InternalProperties"

    WagerCardBindingPickRequest:
      type: object
      properties:
        wagerCardTypeBindingId: { $ref: "#/components/schemas/UUID" }
        scopedReferentId: { $ref: "#/components/schemas/UUID" }
        # fallback if you allow direct picks (optional)
        playerId: { $ref: "#/components/schemas/UUID" }
        teamId: { $ref: "#/components/schemas/UUID" }
        entityLabel: { type: string }
        pickPayload:
          $ref: "#/components/schemas/InternalProperties"

    Wager:
      type: object
      properties:
        id: { $ref: "#/components/schemas/UUID" }
        domainId: { $ref: "#/components/schemas/UUID" }
        eventId: { $ref: "#/components/schemas/UUID" }
        userId: { $ref: "#/components/schemas/UUID" }
        name: { type: string }
        status: { $ref: "#/components/schemas/WagerStatus" }
        isCelebrity: { type: boolean, default: false }
        celebrityLabel: { type: string }
        stakeTokens: { type: integer }
        payoutTokens: { type: integer }
        narrative:
          $ref: "#/components/schemas/InternalProperties"
        timeCreated: { $ref: "#/components/schemas/Timestamp" }
        timeUpdated: { $ref: "#/components/schemas/Timestamp" }
        internalProperties:
          $ref: "#/components/schemas/InternalProperties"

    WagerCardTypeCreateRequest:
      type: object
      required: [name]
      properties:
        name: { type: string }
        description: { type: string }
        maxBindings: { type: integer, default: 1 }
        internalProperties:
          $ref: "#/components/schemas/InternalProperties"

    WagerCardType:
      type: object
      properties:
        id: { $ref: "#/components/schemas/UUID" }
        domainId: { $ref: "#/components/schemas/UUID" }
        name: { type: string }
        description: { type: string }
        maxBindings: { type: integer }
        timeCreated: { $ref: "#/components/schemas/Timestamp" }
        timeUpdated: { $ref: "#/components/schemas/Timestamp" }
        internalProperties:
          $ref: "#/components/schemas/InternalProperties"

    WagerCardTypeBindingCreateRequest:
      type: object
      required: [conceptTermId]
      properties:
        conceptTermId: { $ref: "#/components/schemas/UUID" }
        isOptional: { type: boolean, default: false }
        groupAffiliation: { type: string }
        pointsValue: { type: integer, default: 0 }
        internalProperties:
          $ref: "#/components/schemas/InternalProperties"

    WagerCardTypeBinding:
      type: object
      properties:
        id: { $ref: "#/components/schemas/UUID" }
        wagerCardTypeId: { $ref: "#/components/schemas/UUID" }
        conceptTermId: { $ref: "#/components/schemas/UUID" }
        isOptional: { type: boolean }
        groupAffiliation: { type: string }
        pointsValue: { type: integer }
        timeCreated: { $ref: "#/components/schemas/Timestamp" }
        timeUpdated: { $ref: "#/components/schemas/Timestamp" }
        internalProperties:
          $ref: "#/components/schemas/InternalProperties"

    LoungeCreateRequest:
      type: object
      required: [name]
      properties:
        name: { type: string }
        description: { type: string }
        internalProperties:
          $ref: "#/components/schemas/InternalProperties"

    Lounge:
      type: object
      properties:
        id: { $ref: "#/components/schemas/UUID" }
        domainId: { $ref: "#/components/schemas/UUID" }
        ownerUserId: { $ref: "#/components/schemas/UUID" }
        name: { type: string }
        description: { type: string }
        timeCreated: { $ref: "#/components/schemas/Timestamp" }
        timeUpdated: { $ref: "#/components/schemas/Timestamp" }
        internalProperties:
          $ref: "#/components/schemas/InternalProperties"

    EventLoungeCreateRequest:
      type: object
      required: [loungeId]
      properties:
        loungeId: { $ref: "#/components/schemas/UUID" }
        entryFeeTokens:
          type: integer
          description: Entry fee (server may debit on entry)
          default: 0
        isActive: { type: boolean, default: true }
        internalProperties:
          $ref: "#/components/schemas/InternalProperties"

    EventLounge:
      type: object
      properties:
        id: { $ref: "#/components/schemas/UUID" }
        domainId: { $ref: "#/components/schemas/UUID" }
        eventId: { $ref: "#/components/schemas/UUID" }
        loungeId: { $ref: "#/components/schemas/UUID" }
        entryFeeTokens: { type: integer }
        isActive: { type: boolean }
        timeCreated: { $ref: "#/components/schemas/Timestamp" }
        timeUpdated: { $ref: "#/components/schemas/Timestamp" }
        internalProperties:
          $ref: "#/components/schemas/InternalProperties"

    LoungeEntryCreateRequest:
      type: object
      properties:
        wagerId:
          $ref: "#/components/schemas/UUID"
        internalProperties:
          $ref: "#/components/schemas/InternalProperties"

    LoungeEntry:
      type: object
      properties:
        id: { $ref: "#/components/schemas/UUID" }
        eventLoungeId: { $ref: "#/components/schemas/UUID" }
        userId: { $ref: "#/components/schemas/UUID" }
        wagerId: { $ref: "#/components/schemas/UUID" }
        timeCreated: { $ref: "#/components/schemas/Timestamp" }
        internalProperties:
          $ref: "#/components/schemas/InternalProperties"

    LoungeMemberRole:
      type: string
      enum: [OWNER, ADMIN, MEMBER]

    LoungeMemberStatus:
      type: string
      enum: [INVITED, ACTIVE, INACTIVE, REMOVED, BANNED]

    LoungeMemberCreateRequest:
      type: object
      required: [userId]
      properties:
        userId: { $ref: "#/components/schemas/UUID" }
        role: { $ref: "#/components/schemas/LoungeMemberRole" }
        status: { $ref: "#/components/schemas/LoungeMemberStatus" }
        note: { type: string }
        internalProperties:
          $ref: "#/components/schemas/InternalProperties"

    LoungeMemberUpdateRequest:
      type: object
      properties:
        role: { $ref: "#/components/schemas/LoungeMemberRole" }
        status: { $ref: "#/components/schemas/LoungeMemberStatus" }
        internalProperties:
          $ref: "#/components/schemas/InternalProperties"

    LoungeMembership:
      type: object
      properties:
        id: { $ref: "#/components/schemas/UUID" }
        loungeId: { $ref: "#/components/schemas/UUID" }
        userId: { $ref: "#/components/schemas/UUID" }
        role: { $ref: "#/components/schemas/LoungeMemberRole" }
        status: { $ref: "#/components/schemas/LoungeMemberStatus" }
        invitedByUserId: { $ref: "#/components/schemas/UUID" }
        joinedAt: { $ref: "#/components/schemas/Timestamp" }
        leftAt: { $ref: "#/components/schemas/Timestamp" }
        timeCreated: { $ref: "#/components/schemas/Timestamp" }
        timeUpdated: { $ref: "#/components/schemas/Timestamp" }
        internalProperties:
          $ref: "#/components/schemas/InternalProperties"

    LoungeMembershipListResponse:
      type: object
      properties:
        items:
          type: array
          items:
            $ref: "#/components/schemas/LoungeMembership"
        totalItems:
          type: integer
        internalProperties:
          $ref: "#/components/schemas/InternalProperties"

    LoungeNotificationType:
      type: string
      enum: [INVITE, REMINDER, ANNOUNCEMENT, SYSTEM]

    LoungeNotifyRequest:
      type: object
      required: [message]
      properties:
        notificationType: { $ref: "#/components/schemas/LoungeNotificationType" }
        title: { type: string }
        message: { type: string }
        audience:
          $ref: "#/components/schemas/InternalProperties"
        metadata:
          $ref: "#/components/schemas/InternalProperties"
        internalProperties:
          $ref: "#/components/schemas/InternalProperties"

    LoungeNotification:
      type: object
      properties:
        id: { $ref: "#/components/schemas/UUID" }
        loungeId: { $ref: "#/components/schemas/UUID" }
        senderUserId: { $ref: "#/components/schemas/UUID" }
        notificationType: { $ref: "#/components/schemas/LoungeNotificationType" }
        title: { type: string }
        message: { type: string }
        audience:
          $ref: "#/components/schemas/InternalProperties"
        metadata:
          $ref: "#/components/schemas/InternalProperties"
        timeCreated: { $ref: "#/components/schemas/Timestamp" }
        internalProperties:
          $ref: "#/components/schemas/InternalProperties"

    ArtifactType:
      type: string
      enum: [SHORT, IMAGE, VIDEO, ARTICLE, LINK]

    Artifact:
      type: object
      properties:
        id: { $ref: "#/components/schemas/UUID" }
        domainId: { $ref: "#/components/schemas/UUID" }
        eventId: { $ref: "#/components/schemas/UUID" }
        loungeId: { $ref: "#/components/schemas/UUID" }
        eventLoungeId: { $ref: "#/components/schemas/UUID" }
        type: { $ref: "#/components/schemas/ArtifactType" }
        title: { type: string }
        description: { type: string }
        contentURI: { type: string }
        thumbnailURI: { type: string }
        contentSchemaURI: { type: string }
        isActive: { type: boolean }
        sortRank: { type: integer }
        timeCreated: { $ref: "#/components/schemas/Timestamp" }
        timeUpdated: { $ref: "#/components/schemas/Timestamp" }
        internalProperties:
          $ref: "#/components/schemas/InternalProperties"

    ArtifactViewRequest:
      type: object
      required: [watchSeconds]
      properties:
        watchSeconds: { type: integer, minimum: 0 }
        completed: { type: boolean, default: false }
        eventId: { $ref: "#/components/schemas/UUID" }
        loungeId: { $ref: "#/components/schemas/UUID" }
        eventLoungeId: { $ref: "#/components/schemas/UUID" }
        internalProperties:
          $ref: "#/components/schemas/InternalProperties"

    ArtifactViewResponse:
      type: object
      properties:
        viewId: { $ref: "#/components/schemas/UUID" }
        tokensCredited: { type: integer }
        rewardClaimed:
          type: boolean
        internalProperties:
          $ref: "#/components/schemas/InternalProperties"

    TokenBalanceResponse:
      type: object
      properties:
        userId: { $ref: "#/components/schemas/UUID" }
        balanceTokens: { type: integer }
        internalProperties:
          $ref: "#/components/schemas/InternalProperties"